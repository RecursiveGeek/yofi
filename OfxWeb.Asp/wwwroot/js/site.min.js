function applyPayee(n){var t=n.data("id");$.ajax({url:"/api/tx/ApplyPayee/"+t,type:"POST",success:function(t){t.Ok?n.find(".display-category").text(t.Payee.Category):alert(t.Exception.Message)}})}$(document).ready(function(){$(".apply-link").on("click",function(n){n.preventDefault();applyPayee($(this).parents("tr"))});$(".checkbox-hidden").on("click",function(){$.ajax({url:"/api/tx/Hide/"+this.dataset.id,data:{value:$(this).is(":checked")},type:"POST"})});$(".checkbox-selected").on("click",function(){$.ajax({url:"/api/tx/Select/"+this.dataset.id,data:{value:$(this).is(":checked")},type:"POST"})});$(".checkbox-payee-selected").on("click",function(){var n=$(this).is(":checked")?"SelectPayee":"DeselectPayee";$.ajax({url:"/api/tx/"+n+"/"+this.dataset.id,type:"POST"})});$(".actiondialog").on("show.bs.modal",function(n){var o=$(n.relatedTarget),t=$(this),s=t.find("form"),u=o.parents("tr"),e;s.data("tr",u);var f=u.data("id"),h=t.data("endpoint"),i=t.find(".asp-route-id"),r=i.attr("originalhref");r==null&&(r=i.attr("href"),i.attr("originalhref",r));e=r+"/"+f;i.attr("href",e);$.ajax({url:h+f,success:function(n){t.find(".modal-body").html(n);$(".category-autocomplete").autoComplete({resolverSettings:{url:"/api/tx/cat-ac"}})},error:function(n){alert(n.responseText);t.find(".modal-body").text(n.responseText)}})});$("#editModal form").submit(function(n){n.preventDefault();var t=$(this).data("tr");$.ajax({url:"/api/tx/Edit/5",type:"POST",data:$(this).serialize(),success:function(n){n.Ok?(t.find(".display-payee").text(n.Transaction.Payee),t.find(".display-memo").text(n.Transaction.Memo),t.find(".display-category").text(n.Transaction.Category)):alert(n.Exception.Message)}});$(this).parents(".modal").modal("hide")});$("#editPayeeModal form").submit(function(n){n.preventDefault();var t=$(this).data("tr");$.ajax({url:"/api/tx/EditPayee/5",type:"POST",data:$(this).serialize(),success:function(n){n.Ok?(t.find(".display-payee").text(n.Payee.Name),t.find(".display-category").text(n.Payee.Category)):alert(n.Exception.Message)}});$(this).parents(".modal").modal("hide")});$("#addPayeeModal form").submit(function(n){n.preventDefault();var t=$(this).data("tr");$.ajax({url:"/api/tx/AddPayee/",type:"POST",data:$(this).serialize(),success:function(n){n.Ok?applyPayee(t):alert(n.Exception.Message)}});$(this).parents(".modal").modal("hide")});$("#exportHowModal form").submit(function(){$(this).parents(".modal").modal("hide")});$(".txdrop").on("drop",function(n){var t;if(n.preventDefault(),n.originalEvent.dataTransfer.items){for(t=0;t<n.originalEvent.dataTransfer.items.length;t++)if(n.originalEvent.dataTransfer.items[t].kind==="file"){var r=n.originalEvent.dataTransfer.items[t].getAsFile(),i=$(this),u=i.data("id");let f=new FormData;f.append("file",r);f.append("id",u);$.ajax({url:"/api/tx/UpReceipt/5",type:"POST",data:f,processData:!1,contentType:!1,error:function(n){alert(n.responseText)},success:function(n){n.Ok?(i.find(".display-receipt").children().show(),alert("Ok")):alert(n.Exception.Message)}})}}else for(t=0;t<ev.dataTransfer.files.length;t++)alert("... file["+t+"].name = "+ev.dataTransfer.files[t].name)});$(".btnDismissEditModal").click(function(){$("#editModal").modal("hide")});$(".category-autocomplete").autoComplete({resolverSettings:{url:"/api/tx/cat-ac"}})});