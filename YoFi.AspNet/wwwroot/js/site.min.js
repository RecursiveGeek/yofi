function applyPayee(n){var t=n.data("id");$.ajax({url:"/api/ApplyPayee/"+t,type:"POST",success:function(t){t.Ok?n.find(".display-category").text(t.Item.Category):alert(t.Error)},error:function(n,t,i){alert(t+": "+i)}})}function xsrf(n){element=document.getElementById("xsrf");element&&(token=element.value,n.setRequestHeader("RequestVerificationToken",token))}$(document).ready(function(){$(".apply-link").on("click",function(n){n.preventDefault();applyPayee($(this).parents("tr"))});$(".checkbox-post").on("click",function(){$.ajax({url:this.dataset.endpoint,data:{value:$(this).is(":checked")},beforeSend:xsrf,type:"POST",error:function(n,t,i){alert(t+": "+i)}})});$(".actiondialog").on("show.bs.modal",function(n){var o=$(n.relatedTarget),t=$(this),s=t.find("form"),u=o.parents("tr"),e;s.data("tr",u);var f=u.data("id"),h=t.data("endpoint"),i=t.find(".asp-route-id"),r=i.attr("originalhref");r==null&&(r=i.attr("href"),i.attr("originalhref",r));e=r+"/"+f;i.attr("href",e);$.ajax({url:h+f,success:function(n){t.find(".modal-body").html(n);$(".category-autocomplete").autoComplete({resolverSettings:{url:"/api/cat-ac"}})},error:function(n){alert(n.responseText);t.find(".modal-body").text(n.responseText)}})});$(".partialdialog").on("show.bs.modal",function(){var n=$(this),t=n.data("endpoint");$.ajax({url:t,success:function(t){n.find(".modal-body").html(t)},error:function(t){alert(t.responseText);n.find(".modal-body").text(t.responseText)}})});$("#editModal form").submit(function(n){n.preventDefault();var t=$(this).data("tr"),i=t.data("id");$.ajax({url:"/ajax/tx/edit/"+i,type:"POST",beforeSend:xsrf,data:$(this).serialize(),success:function(n){t.find(".display-payee").text(n.Payee);t.find(".display-memo").text(n.Memo);t.find(".display-category").text(n.Category)},error:function(n,t,i){alert(t+": "+i)}});$(this).parents(".modal").modal("hide")});$("#editPayeeModal form").submit(function(n){n.preventDefault();var t=$(this).data("tr"),i=t.data("id");$.ajax({url:"/ajax/payee/edit/"+i,type:"POST",beforeSend:xsrf,data:$(this).serialize(),success:function(n){t.find(".display-payee").text(n.Name);t.find(".display-category").text(n.Category)},error:function(n,t,i){alert(t+": "+i)}});$(this).parents(".modal").modal("hide")});$("#addPayeeModal form").submit(function(n){n.preventDefault();var t=$(this).data("tr");$.ajax({url:"/ajax/payee/add/",type:"POST",beforeSend:xsrf,data:$(this).serialize(),success:function(){applyPayee(t)},error:function(n,t,i){alert(t+": "+i)}});$(this).parents(".modal").modal("hide")});$("#exportHowModal form").submit(function(){$(this).parents(".modal").modal("hide")});$(".txdrop").on("drop",function(n){var t;if(n.preventDefault(),n.originalEvent.dataTransfer.items){for(t=0;t<n.originalEvent.dataTransfer.items.length;t++)if(n.originalEvent.dataTransfer.items[t].kind==="file"){var r=n.originalEvent.dataTransfer.items[t].getAsFile(),i=$(this),u=i.data("id");let f=new FormData;f.append("file",r);f.append("id",u);$.ajax({url:"/api/UpReceipt/5",type:"POST",beforeSend:xsrf,data:f,processData:!1,contentType:!1,error:function(n){alert(n.responseText)},success:function(n){n.Ok?(i.find(".display-receipt").children().show(),alert("Ok")):alert(n.Error)}})}}else for(t=0;t<ev.dataTransfer.files.length;t++)alert("... file["+t+"].name = "+ev.dataTransfer.files[t].name)});$(".btnDismissModal").click(function(){$(this).parentsUntil("#modal").modal("hide")});$(".category-autocomplete").autoComplete({resolverSettings:{url:"/api/cat-ac"}});$("input:file").change(function(){$(this).siblings(":submit").prop("disabled",!1)});$("[data-bs-toggle=tooltip]").tooltip()});